# Dapr Runtime Configuration
# Enables metrics, tracing, and scheduler features
apiVersion: dapr.io/v1alpha1
kind: Configuration
metadata:
  name: dapr-config
  namespace: todo-app
spec:
  # Enable Prometheus metrics
  metric:
    enabled: true
    port: 9090
  # Enable distributed tracing
  tracing:
    samplingRate: "1"
    otel:
      endpointAddress: "otel-collector.observability.svc.cluster.local:4317"
      isSecure: false
      protocol: grpc
  # Enable scheduler for Jobs API
  features:
    - name: "Scheduler"
      enabled: true
  # API access control
  api:
    allowed:
      - name: state
        version: v1
        protocol: http
      - name: publish
        version: v1
        protocol: http
      - name: subscribe
        version: v1
        protocol: http
      - name: secrets
        version: v1
        protocol: http
      - name: jobs
        version: v1alpha1
        protocol: http
      - name: invoke
        version: v1
        protocol: http
